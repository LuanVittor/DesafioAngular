{"ast":null,"code":"import _asyncToGenerator from \"/home/luan/Angular_Desafio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./board.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./board.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nlet BoardComponent = class BoardComponent {\n  constructor() {\n    this.squares = [];\n    this.xIsNext = true;\n    this.winner = null;\n    this.tied = false;\n    this.player1 = '';\n    this.player2 = '';\n    this.readyToStart = false;\n    this.finishGame = false;\n    this.winnerArray = [];\n    this.gamesHistory = [];\n  }\n\n  ngOnInit() {\n    fetch('http://localhost:3000/getAllGames').then(res => res.json()).then(data => {\n      this.gamesHistory = data;\n      console.log(this.gamesHistory);\n    });\n  }\n\n  definePlayer1(event) {\n    return this.player1 = event.target.value;\n  }\n\n  definePlayer2(event) {\n    return this.player2 = event.target.value;\n  }\n\n  newGame() {\n    this.readyToStart = true;\n    this.squares = Array(9).fill(null);\n    this.winner = null;\n    this.xIsNext = true;\n    this.tied = false;\n    this.finishGame = false;\n  }\n\n  get currentPlayer() {\n    return this.xIsNext ? this.player1 : this.player2;\n  }\n\n  paint(index) {\n    return this.winnerArray.includes(index) ? true : false;\n  }\n\n  moveHelper(currentPlayer) {\n    return currentPlayer === this.player1 ? 'X' : 'O';\n  }\n\n  makeMove(id) {\n    if (!this.squares[id]) {\n      this.squares.splice(id, 1, this.moveHelper(this.currentPlayer));\n      this.xIsNext = !this.xIsNext;\n    }\n\n    this.calculateWinner();\n  }\n\n  threatDate(date) {\n    return date ? date : '-';\n  }\n\n  makeScore() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const obj = {\n        player1: _this.player1,\n        player2: _this.player2,\n        winner: _this.winner\n      };\n      const methods = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(obj)\n      };\n      const score = yield fetch('http://localhost:3000/makeWinner', methods);\n      const data = yield score.json();\n      _this.gamesHistory = data;\n    })();\n  }\n\n  calculateWinner() {\n    const lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\n    for (let i = 0; i < lines.length; i++) {\n      const [a, b, c] = lines[i];\n\n      if (this.squares[a] && this.squares[a] === this.squares[b] && this.squares[a] === this.squares[c]) {\n        this.finishGame = true;\n        this.winnerArray = lines[i];\n        const isXTheWinner = this.squares[a] === 'X';\n        this.winner = isXTheWinner ? this.player1 : this.player2;\n        this.makeScore();\n        return isXTheWinner ? this.winner = this.player1 : this.winner = this.player2;\n      }\n    }\n\n    if (this.squares.every(square => square !== null)) {\n      this.finishGame = true;\n      this.winnerArray = [];\n      this.makeScore();\n      return this.tied = true;\n    }\n\n    return null;\n  }\n\n};\nBoardComponent = __decorate([Component({\n  selector: 'app-board',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], BoardComponent);\nexport { BoardComponent };","map":{"version":3,"sources":["/home/luan/Angular_Desafio/src/app/board/board.component.ts"],"names":["__decorate","__NG_CLI_RESOURCE__0","__NG_CLI_RESOURCE__1","Component","BoardComponent","constructor","squares","xIsNext","winner","tied","player1","player2","readyToStart","finishGame","winnerArray","gamesHistory","ngOnInit","fetch","then","res","json","data","console","log","definePlayer1","event","target","value","definePlayer2","newGame","Array","fill","currentPlayer","paint","index","includes","moveHelper","makeMove","id","splice","calculateWinner","threatDate","date","makeScore","obj","methods","method","headers","body","JSON","stringify","score","lines","i","length","a","b","c","isXTheWinner","every","square","selector","template","styles"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./board.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./board.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nlet BoardComponent = class BoardComponent {\n    constructor() {\n        this.squares = [];\n        this.xIsNext = true;\n        this.winner = null;\n        this.tied = false;\n        this.player1 = '';\n        this.player2 = '';\n        this.readyToStart = false;\n        this.finishGame = false;\n        this.winnerArray = [];\n        this.gamesHistory = [];\n    }\n    ngOnInit() {\n        fetch('http://localhost:3000/getAllGames')\n            .then(res => res.json())\n            .then(data => { this.gamesHistory = data; console.log(this.gamesHistory); });\n    }\n    definePlayer1(event) {\n        return this.player1 = event.target.value;\n    }\n    definePlayer2(event) {\n        return this.player2 = event.target.value;\n    }\n    newGame() {\n        this.readyToStart = true;\n        this.squares = Array(9).fill(null);\n        this.winner = null;\n        this.xIsNext = true;\n        this.tied = false;\n        this.finishGame = false;\n    }\n    get currentPlayer() {\n        return this.xIsNext ? this.player1 : this.player2;\n    }\n    paint(index) {\n        return (this.winnerArray.includes(index)) ? true : false;\n    }\n    moveHelper(currentPlayer) {\n        return (currentPlayer === this.player1) ? 'X' : 'O';\n    }\n    makeMove(id) {\n        if (!this.squares[id]) {\n            this.squares.splice(id, 1, this.moveHelper(this.currentPlayer));\n            this.xIsNext = !this.xIsNext;\n        }\n        this.calculateWinner();\n    }\n    threatDate(date) {\n        return (date) ? date : '-';\n    }\n    async makeScore() {\n        const obj = {\n            player1: this.player1,\n            player2: this.player2,\n            winner: this.winner,\n        };\n        const methods = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(obj)\n        };\n        const score = await fetch('http://localhost:3000/makeWinner', methods);\n        const data = await score.json();\n        this.gamesHistory = data;\n    }\n    calculateWinner() {\n        const lines = [\n            [0, 1, 2],\n            [3, 4, 5],\n            [6, 7, 8],\n            [0, 3, 6],\n            [1, 4, 7],\n            [2, 5, 8],\n            [0, 4, 8],\n            [2, 4, 6]\n        ];\n        for (let i = 0; i < lines.length; i++) {\n            const [a, b, c] = lines[i];\n            if (this.squares[a] && this.squares[a] === this.squares[b] && this.squares[a] === this.squares[c]) {\n                this.finishGame = true;\n                this.winnerArray = lines[i];\n                const isXTheWinner = this.squares[a] === 'X';\n                this.winner = isXTheWinner ? this.player1 : this.player2;\n                this.makeScore();\n                return (isXTheWinner) ? this.winner = this.player1 : this.winner = this.player2;\n            }\n        }\n        if (this.squares.every((square) => square !== null)) {\n            this.finishGame = true;\n            this.winnerArray = [];\n            this.makeScore();\n            return this.tied = true;\n        }\n        return null;\n    }\n};\nBoardComponent = __decorate([\n    Component({\n        selector: 'app-board',\n        template: __NG_CLI_RESOURCE__0,\n        styles: [__NG_CLI_RESOURCE__1]\n    })\n], BoardComponent);\nexport { BoardComponent };\n"]},"metadata":{},"sourceType":"module"}